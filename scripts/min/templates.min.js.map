{"version":3,"sources":["bargraph/template.js","choropleth/template.js","scatterplot/template.js","contact/template.js","imageslider/template.js","share/template.js"],"names":["drawBargraph","block","json","find","val","container","get","spacing","data","JSON","parse","margin","top","right","bottom","left","width","height","x","d3","scale","ordinal","rangeRoundBands","y","linear","range","xAxis","svg","axis","orient","yAxis","ticks","select","append","attr","domain","map","d","label","max","value","call","selectAll","enter","rangeBand","drawMap","snowball","window","parent","path","pluginsUrl","quantize","parseInt","color","palette","colorbrewer","mapType","file","projection","geo","albersUsa","equirectangular","empty","geomap","choropleth","geofile","column","unitId","translate","colors","legend","datum","draw","drawScatterplot","size","dataset","xdata","ydata","forEach","push","X","Y","chart","main","g","i","$","document","ready","choropleths","each","this","jQuery","on","form","closest","to","subject","confirmation","message","others","not","action","post","adminUrl","response","text","css","e","labelLeft","labelRight","rect","getBoundingClientRect","position","pageX","style","hide","show","url","button","windowLeft","screen","windowTop","opts","hasClass","encodeURIComponent","title","excerpt","open"],"mappings":"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","file":"templates.min.js","sourcesContent":["(function($) {\r\n  $(document).ready(function() {\r\n\r\n    var choropleths = $(\".snowball-block-bargraph\");\r\n    choropleths.each(function() {\r\n      drawBargraph($(this));\r\n    });\r\n\r\n  });\r\n})(jQuery);\r\n\r\nfunction drawBargraph(block) {\r\n  var json = block.find(\".json\").val();\r\n  var container = block.find(\".chart\").get(0);\r\n  var spacing = block.find(\".spacing\").val();\r\n  var data = JSON.parse(json);\r\n  var valuesArray = [];\r\n\r\n  var margin = {top: 40, right: 40, bottom: 60, left: 30};\r\n  var width = 800 - margin.left - margin.right;\r\n  var height = 400 - margin.top - margin.bottom;\r\n\r\n  var x = d3.scale.ordinal().rangeRoundBands([0, width], spacing);\r\n  var y = d3.scale.linear().range([height, 0]);\r\n\r\n  var xAxis = d3.svg.axis()\r\n      .scale(x)\r\n      .orient(\"bottom\");\r\n  var yAxis = d3.svg.axis()\r\n      .scale(y)\r\n      .orient(\"left\")\r\n      .ticks(10);\r\n  var svg = d3.select(container).append(\"svg\")\r\n      .attr(\"width\", width + margin.left + margin.right)\r\n      .attr(\"height\", height + margin.top + margin.bottom)\r\n    .append(\"g\")\r\n      .attr(\"transform\",\r\n            \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n    x.domain(data.map(function(d) { return d.label; }));\r\n    y.domain([0, d3.max(data, function(d) { return d.value; })]);\r\n    svg.append(\"g\")\r\n        .attr(\"class\", \"x axis\")\r\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n        .call(xAxis);\r\n\r\n    svg.append(\"g\")\r\n        .attr(\"class\", \"y axis\")\r\n        .call(yAxis);\r\n    svg.selectAll(\"bar\")\r\n        .data(data)\r\n      .enter().append(\"rect\")\r\n        .attr(\"x\", function(d) { return x(d.label); })\r\n        .attr(\"width\", x.rangeBand())\r\n        .attr(\"y\", function(d) { return y(d.value); })\r\n        .attr(\"height\", function(d) { return height - y(d.value); });\r\n}","(function($) {\n  $(document).ready(function() {\n\n    var choropleths = $(\".snowball-block-choropleth\");\n    choropleths.each(function() {\n      drawMap($(this));\n    });\n\n  });\n})(jQuery);\n\n\nfunction drawMap(block) {\n  var snowball = snowball || window.parent.snowball;\n  var path = snowball.pluginsUrl + \"/lib/d3-geomap\";\n\n  var json = block.find(\".json-usa\").val();\n  var container = block.find(\".map\").get(0);\n  var quantize = parseInt(block.find(\"input.quantize\").val());\n  var color = block.find(\"input.color\").val();\n  var palette = colorbrewer[color][quantize];\n\n  var mapType = block.find(\".map-type\").val();\n  var file = path + \"/topojson/countries/USA.json\";\n  var projection = d3.geo.albersUsa;\n  var scale = 800;\n\n  if (mapType === \"world\") {\n    json = block.find(\".json-world\").val();\n    file = path + \"/topojson/world/countries.json\";\n    projection = d3.geo.equirectangular;\n    scale = 100;\n  }\n\n  if (json) {\n    block.find(\".map\").empty();\n\n    var map = d3.geomap.choropleth()\n      .geofile(file)\n      .projection(projection)\n      .column(\"Value\")\n      .unitId(\"fips\")\n      .scale(scale)\n      .translate([400, 200])\n      .colors(palette)\n      .legend(true);\n\n   d3.select(container)\n     .datum(JSON.parse(json))\n     .call(map.draw, map)\n     .selectAll(\"svg\").attr(\"preserveAspectRatio\", \"xMinYMin meet\").attr(\"viewBox\", \"0 0 500 400\");\n  }\n}\n","(function($) {\n  $(document).ready(function() {\n\n    var choropleths = $(\".snowball-block-scatterplot\");\n    choropleths.each(function() {\n      drawScatterplot($(this));\n    });\n\n  });\n})(jQuery);\n\nfunction drawScatterplot(block) {\n  var json = block.find(\".json\").val();\n\n  if (json) {\n    var container = block.find(\".chart\").get(0);\n    var size = block.find(\".size\").val();\n    var data = JSON.parse(json);\n    var dataset = [];\n    var xdata = [];\n    var ydata = [];\n\n    data.forEach(function(d) {\n      dataset.push([d.X, d.Y]);\n      xdata.push(d.X);\n      ydata.push(d.Y);\n    });\n\n    var margin = {top: 40, right: 40, bottom: 60, left: 60};\n    var width = 800 - margin.left - margin.right;\n    var height = 400 - margin.top - margin.bottom;\n\n    var x = d3.scale.linear()\n              .domain([0, d3.max(xdata)])\n              .range([ 0, width ]);\n\n    var y = d3.scale.linear()\n              .domain([0, d3.max(ydata)])\n              .range([ height, 0 ]);\n\n    var chart = d3.select(container)\n      .append('svg:svg')\n      .attr('width', width + margin.right + margin.left)\n      .attr('height', height + margin.top + margin.bottom)\n      .attr('class', 'chart');\n\n    var main = chart.append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .attr('width', width)\n      .attr('height', height)\n      .attr('class', 'main');\n\n    var xAxis = d3.svg.axis()\n      .scale(x)\n      .orient('bottom');\n\n    main.append('g')\n      .attr('transform', 'translate(0,' + height + ')')\n      .attr('class', 'main axis date')\n      .call(xAxis);\n\n    var yAxis = d3.svg.axis()\n      .scale(y)\n      .orient('left');\n\n    main.append('g')\n      .attr('transform', 'translate(0,0)')\n      .attr('class', 'main axis date')\n      .call(yAxis);\n\n    var g = main.append(\"svg:g\"); \n\n    g.selectAll(\"scatter-dots\")\n      .data(ydata)\n      .enter().append(\"svg:circle\")\n          .attr(\"cy\", function (d) { return y(d); } )\n          .attr(\"cx\", function (d,i) { return x(xdata[i]); } )\n          .attr(\"r\", size);\n\n  }\n}\n","(function($) {\n  $(document).ready(function() {\n\n    $(\"body\").on(\"click\", \".snowball-block-contact .submit\", function() {\n      var form = $(this).closest(\"form\");\n      var to = form.find(\"[name='to']\").val();\n      var subject = form.find(\"[name='subject']\").val();\n      var confirmation = form.find(\"[name='confirmation']\").val();\n      var message = \"\";\n      var others = form.find(\"input, textarea\").not(\"[type='hidden']\");\n\n      others.each(function() {\n        var val = $(this).val();\n\n        if ($(this).attr(\"name\")) {\n          message = message + \"\\n\\n\" + $(this).attr(\"name\") + \": \" + val;\n        } else {\n          message = message + \"\\n\\n\" + val;\n        }\n      });\n\n      var data = {\n        action: \"mail_before_submit\",\n        to: to,\n        subject: subject,\n        message: message\n      };\n\n      if (window.parent) {\n        snowball = window.parent.snowball;\n      }\n\n      jQuery.post(snowball.adminUrl + \"admin-ajax.php\", data, function(response) {\n        form.text(confirmation);\n      });\n    });\n\n  });\n})(jQuery);\n","(function($) {\r\n\r\n  $(document).ready(function() {\r\n    $(\".snowball-block-imageslider .left\").css(\"width\", \"50%\");\r\n  });\r\n\r\n  $(document).on(\"mousemove\", \".snowball-block-imageslider .wrapper\", function(e) {\r\n    var block = $(this).closest(\".snowball-block\");\r\n    var left = block.find(\".left\")[0];\r\n    var right = block.find(\"img\")[0];\r\n    var labelLeft = block.find(\".label-left\");\r\n    var labelRight = block.find(\".label-right\");\r\n    var rect = right.getBoundingClientRect();\r\n    var position = ((e.pageX - rect.left) / rect.width)*100;\r\n\r\n    if (position <= 100) {\r\n      left.style.width = position + \"%\";\r\n\r\n      if (position <= 20) {\r\n        labelLeft.hide();\r\n      } else {\r\n        labelLeft.show();\r\n      }\r\n\r\n      if (position >= 80) {\r\n        labelRight.hide();\r\n      } else {\r\n        labelRight.show();\r\n      }\r\n    }\r\n  });\r\n\r\n})(jQuery);\r\n","(function($) {\n  $(document).ready(function() {\n\n    $(\"body\").on(\"click\", \".snowball-block-share .button\", function() {\n      var snowball = snowball || window.parent.snowball;\n      var button = jQuery(this);\n      var width = 500;\n      var height = 400;\n      var windowLeft = (screen.width/2) - (width/2);\n      var windowTop = (screen.height/2) - (height/2);\n      var opts = \"toolbar=0,status=0,width=\" + width + \",height=\" + height + \",top=\" + windowTop + \",left=\" + windowLeft;\n      var url;\n\n      if (button.hasClass(\"facebook\")) {\n        url = \"http://www.facebook.com/sharer.php?u=\" + encodeURIComponent(snowball.url);\n      } else if (button.hasClass(\"twitter\")) {\n        url = \"http://twitter.com/share?url=\" + encodeURIComponent(snowball.url) + \"&text=\" + encodeURIComponent(snowball.title);\n      } else if (button.hasClass(\"tumblr\")) {\n        url = \"https://www.tumblr.com/widgets/share/tool?posttype=link&canonicalUrl=\" + encodeURIComponent(snowball.url) + \"&title=\" + encodeURIComponent(snowball.title) + \"&content=\" + encodeURIComponent(snowball.excerpt);\n      } else {\n        url = \"https://plus.google.com/share?url=\" + encodeURIComponent(snowball.url);\n      }\n\n      window.open(url, \"share\", opts);\n    });\n\n  });\n})(jQuery);\n"],"sourceRoot":"/source/"}